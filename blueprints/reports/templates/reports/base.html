{% extends 'base.html' %}

{% block modules_css %}

{{ super() }}

<link href="{{ url_for('.static', filename='css/style.css') }}" media="screen" rel="stylesheet">
<link href="{{ url_for('static', filename='jquery-ui/css/cupertino/jquery-ui-1.10.2.custom.min.css') }}" rel="stylesheet">
{% endblock %}

{% block modules_js %}
    {{ super() }}
    <script src="{{ url_for('static', filename='jquery-ui/js/jquery-ui-1.10.2.custom.min.js') }}"></script>
    <script src="{{ url_for('static', filename='jquery-ui/js/i18n/jquery.ui.datepicker-ru.js') }}"></script>
    <script type="text/javascript">
    $(function() {
        $( "#from" ).datepicker({
          changeMonth: true,
          onClose: function( selectedDate ) {
            $( "#to" ).datepicker( "option", "minDate", selectedDate );
          }
        });
        {% if request.form.get('start') %}
            $('#from').datepicker("setDate", '{{ request.form.get('start') }}');
        {% endif %}
        $( "#to" ).datepicker({
          defaultDate: "+1w",
          changeMonth: true,
          onClose: function( selectedDate ) {
            $( "#from" ).datepicker( "option", "maxDate", selectedDate );
          }
        });
        {% if request.form.get('end') %}
            $('#to').datepicker("setDate", '{{ request.form.get('end') }}');
        {% endif %}
    });
    </script>
    <script type="text/javascript">
    $('form').submit(function(){
        $('body').addClass("loading");
    });
    </script>
    <script type="text/javascript">
        function filter (phrase, _id){
            var words = phrase.value.toLowerCase().split(" ");
            var table = document.getElementById(_id);
            var ele;
            for (var r = 1; r < table.rows.length; r++){
                ele = table.rows[r].innerHTML.replace(/<[^>]+>/g,"");
                    var displayStyle = 'none';
                    for (var i = 0; i < words.length; i++) {
                    if (ele.toLowerCase().indexOf(words[i])>=0)
                    displayStyle = '';
                    else {
                    displayStyle = 'none';
                    break;
                    }
                    }
                table.rows[r].style.display = displayStyle;
            }
        }
    </script>
    <script type="text/javascript">
    $('#filter_report').attr({'onkeyup': "filter(this, 'result_table')"});
    </script>
    <div class="loader"></div>
{% endblock %}