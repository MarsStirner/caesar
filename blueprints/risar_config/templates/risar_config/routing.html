<div ng-controller="RisarRoutingSetup">
    <h1>Настройки маршрутизации беременных</h1>
    <div class="row">
        <div class="col-md-12">
            <div class="input-group">
                <span class="input-group-addon">Диагнозы</span>
                <input class="form-control" ng-model="query">
                <span class="input-group-addon glyphicon glyphicon-search"></span>
            </div>
        </div>
    </div>
    <table class="table table-condensed">
        <thead>
        <tr>
            <th>Название ЛПУ</th>
            <th>Обслуживаемые диагнозы</th>
        </tr>
        </thead>
        <tbody>
        <tr ng-repeat="row in list">
            <td>[[ row.org.name ]]</td>
            <td>
                <ui-select multiple ng-model="row.diagnoses" theme="select2">
                    <ui-select-match placeholder="Select person...">[[ $item.name ]] &lt;[[ $item.email ]]&gt;</ui-select-match>
                    <ui-select-choices repeat="mkb in MKB.objects | propsFilter: {name: $select.search, age: $select.search}">
                        <div ng-bind-html="mkb.diag | highlight: $select.search"></div>
                        <small ng-bind-html="'' + mkb.desc | highlight: $select.search"></small>
                    </ui-select-choices>
                </ui-select>
                <button class="btn btn-primary" ng-click="copy_clipboard(row)">Копировать</button>
                <button class="btn btn-primary" ng-click="paste_clipboard(row)" ng-disabled="!clipboard">Вставить</button>
            </td>
        </tr>
        </tbody>
    </table>
</div>